#include "iostm8s103f3.h"
#include "motor.h"

void Motor_Init(void)
{
	//GPIO_Init(MOTOR_GPIO_PROT, (GPIO_Pin_TypeDef)MOTOR_GPIO_PINS,\
	GPIO_MODE_OUT_PP_LOW_FAST);
	PC_DDR |= 0x08;
	PC_CR1 |= 0x08;
	PC_CR2 |= 0x08;
	//TIM1_OC3Init(TIM1_OCMODE_PWM1,TIM1_OUTPUTSTATE_ENABLE,TIM1_OUTPUTNSTATE_DISABLE,\
    500,TIM1_OCPOLARITY_LOW,TIM1_OCNPOLARITY_LOW,TIM1_OCIDLESTATE_SET,TIM1_OCNIDLESTATE_RESET);
	TIM1_CCMR3 = 0x60;
	//TIM1_CCER2 |= 0x0B;
	TIM1_CCER2 &= ~0x0f;
	TIM1_CCER2 |= 0x0B;
	TIM1_CCR3H = 0x01;
	TIM1_CCR3L = 0xF4;
	//TIM1_OISR |= 0x10;
	TIM1_OISR &= ~0x30;
	TIM1_OISR |= 0x10;
	//TIM1_CCxCmd(TIM1_CHANNEL_3, ENABLE);
	TIM1_CCER2 |= 0x01;
	//TIM1_OC3PreloadConfig(ENABLE); 
	TIM1_CCMR3 |= 0x08;
	
}